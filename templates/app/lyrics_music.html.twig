{% extends '@EasyAdmin/page/content.html.twig' %}

{% block body %}
    <div class="content">
        {% if lyrics.text %}
            {% set url = path('lyrics_raw', {'code': lyrics.code}) %}
            <div class="alert alert-info">
                <a href="{{ url }}" target="_blank">View raw ChordPro</a>
            </div>

{#            {% set url = '/abuelo.cho' %}#}
            {% set _sc = 'music' %}

            <div {{ stimulus_controller(_sc, {
                'url': url,
                'content': lyrics.text,
                'format': 'chordpro',
                'width': 800,
                'height': 600
            }) }} style="min-height: 400px; border: 1px solid #dee2e6; border-radius: 0.375rem; padding: 1rem;" class="text-center text-muted">
                <div class="spinner-border" role="status">
                    <span class="visually-hidden">Loading music...</span>
                </div>
                <p class="mt-2">Loading sheet music...</p>
            </div>
        {% else %}
            <div class="alert alert-warning">
                No ChordPro data available
            </div>
        {% endif %}
        <pre>{{ lyrics.text }}</pre>
    </div>
{% endblock %}
