{% set slotOptions = {
    NAVBAR_MENU: {
        x: null,
        frontPage: true
    },
    PAGE_ACTIONS: {
        audio: audio,
        song: audio.song
    },
    BREADCRUMBS: {
        audio: audio,
        song: audio.song
    }
} %}
<twig:tabler:page :title="audio.title"
                  :slotOptions="slotOptions"
>
    <div class="row">
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h3 class="card-title">Audio</h3>
                </div>
                <div class="card-body">
                    <audio controls preload="metadata" style="width: 100%;">
                        <source src="{{ path('audio_file', { id: audio.id }) }}" type="audio/mpeg">
                        Your browser does not support the audio element.
                    </audio>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h3 class="card-title">Details</h3>
                </div>
                <div class="card-body">
                    <div><strong>Title:</strong> {{ audio.title }}</div>
                    <div><strong>Song:</strong> {{ audio.song.title }}</div>
                    <div><strong>Format:</strong> {{ audio.format }}</div>
                    <div><strong>Variant:</strong> {{ audio.variant }}</div>
                </div>
            </div>
        </div>
    </div>

    <twig:divider />

    <div class="row mb-4">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Sheet Music</h3>
                </div>
                <div class="card-body">
                    {% set _sc = 'music' %}
                    {% set url = path('audio_musicxml', { id: audio.id }) %}
                    <a href="{{ url }}" target="_blank">{{ url }}</a>
                    <div {{ stimulus_controller(_sc, {
                        'url': url,
                        'format': 'xml',
                        'width': 800,
                        'height': 600
                    }) }} style="min-height: 400px; border: 1px solid #dee2e6; border-radius: 0.375rem; padding: 1rem;"
                         class="text-center text-muted">
                        <div class="spinner-border" role="status">
                            <span class="visually-hidden">Loading music...</span>
                        </div>
                        <p class="mt-2">Loading sheet music...</p>
                        <div {{ stimulus_target(_sc, 'display') }}>
                            Rendered music goes here.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</twig:tabler:page>
